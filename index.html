<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thailand Countdown Ultimate</title>

<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" type="image/png" href="icon.png">
<meta name="theme-color" content="#0d47a1">

<style>
body{
    margin:0;
    font-family:sans-serif;
    text-align:center;
    background:linear-gradient(to right,#0d47a1,#42a5f5);
    color:white;
    padding:20px;
}
.card{
    background:white;
    color:#333;
    padding:20px;
    border-radius:20px;
    max-width:600px;
    margin:auto;
}
.progress{
    width:100%;
    background:#ddd;
    border-radius:10px;
    overflow:hidden;
}
.bar{
    height:15px;
    background:#4caf50;
    width:0%;
    transition:width .5s ease;
}
input,button{
    padding:6px;
    margin:5px;
}
button{
    background:#0d47a1;
    color:white;
    border:none;
    border-radius:6px;
}
button:hover{opacity:.9;}

#calendar{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:5px;
    margin-top:10px;
}
.calendar-day,.calendar-weekday{
    padding:8px;
    border-radius:5px;
    background:#f0f0f0;
    font-size:13px;
}
.calendar-weekday{
    background:#90caf9;
    font-weight:bold;
}
.travel{background:#ff9800;color:white;}
.work{background:#4caf50;color:white;}
.today{border:2px solid #0d47a1;}
#monthTitle{font-weight:bold;margin:10px 0;color:#0d47a1;}
</style>
</head>
<body>

<div class="card">

<h2>‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏ß‡∏±‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô üáπüá≠‚úàÔ∏è</h2>

<p>‡∏ß‡∏±‡∏ô‡∏ö‡∏¥‡∏ô‡∏Å‡∏•‡∏±‡∏ö:</p>
<input type="datetime-local" id="end">
<button onclick="saveDate()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>

<h3 id="countdown"></h3>
<div class="progress"><div class="bar" id="bar"></div></div>
<div id="percent"></div>

<hr>
<h3>üåç ‡πÄ‡∏ß‡∏•‡∏≤‡πÇ‡∏•‡∏Å</h3>
<div id="world"></div>

<hr>
<h3>üõ´ ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ö‡∏¥‡∏ô</h3>
<div id="flightRoute"></div>

<hr>
<h3>üå§ ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û</h3>
<div id="weather">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>

<hr>
<h3>üìÜ ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô</h3>
<div id="monthTitle"></div>
<button onclick="prevMonth()">‚óÄ</button>
<button onclick="nextMonth()">‚ñ∂</button>
<div id="calendar"></div>

</div>

<script>

/* ================= SETTINGS ================= */

const DEFAULT_DATE = "2026-04-23T23:50";
const WORK_START = new Date("2026-02-05");
const travelDate = new Date("2026-04-23");
const workDate = new Date("2026-02-05");

/* ================= DATE INIT ================= */

let endDate = new Date(localStorage.getItem("end") || DEFAULT_DATE);

function formatLocal(date){
    const pad=n=>n.toString().padStart(2,'0');
    return date.getFullYear()+"-"+pad(date.getMonth()+1)+"-"+pad(date.getDate())+
           "T"+pad(date.getHours())+":"+pad(date.getMinutes());
}
document.getElementById("end").value=formatLocal(endDate);

function saveDate(){
    const val=document.getElementById("end").value;
    if(!val) return;
    endDate=new Date(val);
    localStorage.setItem("end",val);
    update();
}

/* ================= COUNTDOWN ================= */

function update(){
    const now=new Date();
    const remain=endDate-now;

    if(remain<=0){
        document.getElementById("countdown").innerHTML="üéâ ‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡πâ‡∏ß!";
        document.getElementById("bar").style.width="100%";
        document.getElementById("percent").innerHTML="100%";
        updateFlightRoute();
        return;
    }

    const d=Math.floor(remain/86400000);
    const h=Math.floor((remain%86400000)/3600000);
    const m=Math.floor((remain%3600000)/60000);
    const s=Math.floor((remain%60000)/1000);

    document.getElementById("countdown").innerHTML=
        `‡πÄ‡∏´‡∏•‡∏∑‡∏≠  ‡∏ß‡∏±‡∏ô  ‡∏ä‡∏°  ‡∏ô‡∏≤‡∏ó‡∏µ  ‡∏ß‡∏¥`;

    const total=endDate-WORK_START;
    const passed=now-WORK_START;
    const percent=Math.min(Math.max((passed/total)*100,0),100);

    document.getElementById("bar").style.width=percent+"%";
    document.getElementById("percent").innerHTML=
        "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤ "+percent.toFixed(1)+"%";

    updateWorldClock();
    updateFlightRoute();   // üëà ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å
}

setInterval(update,1000);
update();

/* ================= WORLD CLOCK ================= */

function updateWorldClock(){
    document.getElementById("world").innerHTML=
        "üáπüá≠ ‡πÑ‡∏ó‡∏¢: "+new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"})+"<br>"+
        "üá™üáπ ‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢: "+new Date().toLocaleString("en-GB",{timeZone:"Africa/Addis_Ababa"})+"<br>"+
        "üá∏üá¨ ‡∏™‡∏¥‡∏á‡∏Ñ‡πÇ‡∏õ‡∏£‡πå: "+new Date().toLocaleString("en-GB",{timeZone:"Asia/Singapore"})+"<br>"+
        "üá≤üáæ ‡∏Å‡∏±‡∏ß‡∏•‡∏≤‡∏•‡∏±‡∏°‡πÄ‡∏õ‡∏≠‡∏£‡πå: "+new Date().toLocaleString("en-GB",{timeZone:"Asia/Kuala_Lumpur"});
}

/* ================= FLIGHT ROUTE ================= */

function updateFlightRoute(){
    const options={
        timeZone:"Africa/Addis_Ababa",
        day:"numeric",
        month:"long",
        year:"numeric",
        hour:"2-digit",
        minute:"2-digit"
    };

    const formatted=endDate.toLocaleString("th-TH",options);

    document.getElementById("flightRoute").innerHTML=
        "ADD ‚Üí SIN ‚Üí KUL ‚Üí BKK<br>"+
        "‡∏≠‡∏≠‡∏Å‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á: "+formatted+" (‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢)";
}

/* ================= WEATHER ================= */

const apiKey="10305e607cbb444690ceede20de29e6a";
function fetchWeather(){
    if(apiKey==="YOUR_API_KEY"){
        document.getElementById("weather").innerHTML="‡πÉ‡∏™‡πà API Key ‡∏Å‡πà‡∏≠‡∏ô";
        return;
    }

    fetch(`https://api.openweathermap.org/data/2.5/weather?q=Bangkok,TH&appid=&units=metric`)
    .then(res=>res.json())
    .then(data=>{
        document.getElementById("weather").innerHTML=
            `¬∞C, `;
    })
    .catch(()=>document.getElementById("weather").innerHTML="‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
}
fetchWeather();

/* ================= CALENDAR ================= */

let calYear=new Date().getFullYear();
let calMonth=new Date().getMonth();

function generateCalendar(year,month){
    const calendar=document.getElementById("calendar");
    calendar.innerHTML="";

    const months=["‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå","‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°","‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô","‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°","‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô",
                  "‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°","‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô","‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°","‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô","‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°"];
    document.getElementById("monthTitle").innerHTML=
        months[month]+" "+year;

    const weekdays=["‡∏≠‡∏≤","‡∏à","‡∏≠","‡∏û","‡∏û‡∏§","‡∏®","‡∏™"];
    weekdays.forEach(w=>{
        const d=document.createElement("div");
        d.className="calendar-weekday";
        d.textContent=w;
        calendar.appendChild(d);
    });

    const firstDay=new Date(year,month,1).getDay();
    const lastDate=new Date(year,month+1,0).getDate();

    for(let i=0;i<firstDay;i++)
        calendar.appendChild(document.createElement("div"));

for(let d=1; d<=lastDate; d++){
    const day = document.createElement("div");
    day.className = "calendar-day";
    day.textContent = d;

    const thisDate = new Date(year, month, d);

    // ‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
    if(thisDate.toDateString() === travelDate.toDateString())
        day.classList.add("travel");
    if(thisDate.toDateString() === workDate.toDateString())
        day.classList.add("work");
    if(thisDate.toDateString() === new Date().toDateString())
        day.classList.add("today");

    // ‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤ ‚Üí ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÅ‡∏ö‡∏ö workDate
    if(thisDate >= WORK_START && thisDate < new Date()){
        day.classList.add("work");
    }

    calendar.appendChild(day);
}
}

function prevMonth(){
    calMonth--;
    if(calMonth<0){calMonth=11;calYear--;}
    generateCalendar(calYear,calMonth);
}
function nextMonth(){
    calMonth++;
    if(calMonth>11){calMonth=0;calYear++;}
    generateCalendar(calYear,calMonth);
}

generateCalendar(calYear,calMonth);

</script>
</body>
