<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thailand Countdown Ultimate V6</title>
<link rel="manifest" href="manifest.json">

<style>
body{
    font-family:sans-serif;
    text-align:center;
    margin:0;
    padding:20px;
    background:linear-gradient(to right,#0d47a1,#42a5f5);
    color:white;
}
.card{
    background:white;
    color:#333;
    padding:20px;
    border-radius:20px;
    max-width:500px;
    margin:auto;
}
.progress{
    width:100%;
    background:#ddd;
    border-radius:10px;
}
.bar{
    height:15px;
    background:#4caf50;
    width:0%;
}
.celebrate{
    font-size:40px;
    display:none;
    animation:pop 1s infinite alternate;
}
@keyframes pop{
    from{transform:scale(1);}
    to{transform:scale(1.2);}
}

/* ===== Calendar ===== */
#calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
    margin-top: 10px;
}

.calendar-day, .calendar-weekday {
    padding: 8px;
    background:#f0f0f0;
    border-radius:5px;
    text-align:center;
    word-wrap: break-word;
    font-size:14px;
}

/* Weekday header */
.calendar-weekday {
    font-weight:bold;
    background:#90caf9;
    color:#0d47a1;
}

/* Special days */
.calendar-day.travel {
    background:#ff9800;
    color:white;
}
.calendar-day.work {
    background:#4caf50;
    color:white;
}
.calendar-day.today {
    border:2px solid #0d47a1;
}

/* ===== Responsive ===== */
@media screen and (max-width: 480px) {
    #calendar {
        grid-template-columns: repeat(7, 1fr);
    }
    .calendar-day, .calendar-weekday {
        font-size:12px;
        padding:6px;
    }
}
</style>
</head>
<body>

<div class="card">
<h2>üáπüá≠ Countdown Ultimate V6</h2>

<p>‡∏ß‡∏±‡∏ô‡∏ö‡∏¥‡∏ô‡∏Å‡∏•‡∏±‡∏ö:</p>
<input type="datetime-local" id="end">
<button onclick="saveDate()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>

<h3 id="countdown"></h3>
<div class="progress"><div class="bar" id="bar"></div></div>
<div id="percent"></div>

<hr>
<h3>üåç ‡πÄ‡∏ß‡∏•‡∏≤‡πÇ‡∏•‡∏Å</h3>
<div id="world"></div>

<hr>
<h3>üõ´ ‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô</h3>
<div>
BKK - Suvarnabhumi<br>
ADD - Addis Ababa
</div>

<hr>
<h3>üå§ ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</h3>
<div id="weather">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®...</div>

<hr>
<h3>üìÜ ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô</h3>
<button onclick="prevMonth()">‚óÄ ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
<button onclick="nextMonth()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ñ∂</button>
<div id="calendar"></div>

<div class="celebrate" id="celebrate">üéâüáπüá≠‚úàÔ∏è</div>
</div>

<script>
// =================== SERVICE WORKER ===================
if('serviceWorker' in navigator){
    navigator.serviceWorker.register('sw.js');
}

// =================== COUNTDOWN ===================
let endDate=new Date(localStorage.getItem("end")||"2026-04-23T12:00");
document.getElementById("end").value=endDate.toISOString().slice(0,16);

function saveDate(){
    endDate=new Date(document.getElementById("end").value);
    localStorage.setItem("end",endDate);
}

function update(){
    let now=new Date();
    let remain=endDate-now;

    if(remain<=0){
        document.getElementById("countdown").innerHTML="üéâ ‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡πâ‡∏ß!";
        document.getElementById("celebrate").style.display="block";
        return;
    }

    let d=Math.floor(remain/86400000);
    let h=Math.floor((remain%86400000)/3600000);
    let m=Math.floor((remain%3600000)/60000);
    let s=Math.floor((remain%60000)/1000);

    document.getElementById("countdown").innerHTML=
    `‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${d} ‡∏ß‡∏±‡∏ô ${h} ‡∏ä‡∏° ${m} ‡∏ô‡∏≤‡∏ó‡∏µ ${s} ‡∏ß‡∏¥`;

    let percent=100-((remain/(1000*60*60*24*100))*100);
    document.getElementById("bar").style.width=percent+"%";
    document.getElementById("percent").innerHTML="‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤ "+percent.toFixed(1)+"%";

    let thai=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});
    let eth=new Date().toLocaleString("en-GB",{timeZone:"Africa/Addis_Ababa"});
    document.getElementById("world").innerHTML=
    `üáπüá≠ ‡πÑ‡∏ó‡∏¢: ${thai}<br>üá™üáπ ‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢: ${eth}`;
}

setInterval(update,1000);
update();

// =================== WEATHER ===================
const apiKey = "YOUR_API_KEY"; // ‡πÉ‡∏™‡πà API Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
const city = "Bangkok,TH";

function fetchWeather() {
    fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`)
    .then(res => res.json())
    .then(data => {
        let temp = data.main.temp.toFixed(1);
        let desc = data.weather[0].description;
        document.getElementById("weather").innerHTML = `üå° ${temp}¬∞C, ${desc}`;
    })
    .catch(err=>{
        console.log(err);
        document.getElementById("weather").innerHTML = "‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
    });
}
fetchWeather();
setInterval(fetchWeather, 10*60*1000);

// =================== CALENDAR ===================
let calYear = new Date().getFullYear();
let calMonth = new Date().getMonth();

const travelDate = new Date("2026-04-23");
const workDate = new Date("2026-02-05");

function generateCalendar(year, month){
    const calendar = document.getElementById("calendar");
    calendar.innerHTML = "";

    const weekdays = ["‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå","‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå","‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£","‡∏û‡∏∏‡∏ò","‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ","‡∏®‡∏∏‡∏Å‡∏£‡πå","‡πÄ‡∏™‡∏≤‡∏£‡πå"];
    weekdays.forEach(dayName=>{
        let day = document.createElement("div");
        day.className="calendar-weekday";
        day.textContent=dayName;
        calendar.appendChild(day);
    });

    const firstDay = new Date(year, month, 1).getDay();
    const lastDate = new Date(year, month+1, 0).getDate();

    for(let i=0;i<firstDay;i++){
        let empty = document.createElement("div");
        calendar.appendChild(empty);
    }

    for(let d=1; d<=lastDate; d++){
        let day = document.createElement("div");
        day.className="calendar-day";
        day.textContent=d;

        let thisDate = new Date(year, month, d);

        if(thisDate.toDateString() === travelDate.toDateString()){
            day.classList.add("travel");
        }
        if(thisDate.toDateString() === workDate.toDateString()){
            day.classList.add("work");
        }
        const today = new Date();
        if(thisDate.toDateString() === today.toDateString()){
            day.classList.add("today");
        }

        calendar.appendChild(day);
    }
}

function prevMonth(){
    calMonth--;
    if(calMonth < 0){
        calMonth = 11;
        calYear--;
    }
    generateCalendar(calYear, calMonth);
}
function nextMonth(){
    calMonth++;
    if(calMonth > 11){
        calMonth = 0;
        calYear++;
    }
    generateCalendar(calYear, calMonth);
}

generateCalendar(calYear, calMonth);
</script>

</body>
</html>
